\section{The \omegamodel\ model}
\label{sec:omega}
\omegamodel\ is a python code developed by Benoit C\^{o}t\'{e} and Christian Ritter\footnote{\url{https://nugrid.github.io/NuPyCEE/}}.
OMEGA stands for 'One-zone Model of the Evolution of Galaxies' and evolves the isotopic content of a galaxy\mycite{cote16a}.
The model is a one-zone model, which means that the entire galaxy is simplified to a single point.
A zero-space-dimensional galaxy model seems unrealistic, but it can be imagined as the mean value for a three-space-dimensional galaxy model.

In this work the \omegamodel\ code will be modified with a wrapper in order to explore various parameters related to nucleosynthesis.

\subsection{Process}
\label{sec:omega-process}
The \omegamodel\ model emulates the chemical evolution of a galaxy starting from the initial primordial gas. A simple stellar population is created by integrating the star formation rate over time.
The star formation rate is calculated either by using a constant star formation rate, the Kennicut-Schmidt law\mycitetwo{fuchs09}{and refernces therein}, or by using an input star formation rate and interpolate over those values.

The stellar populations represent a cluster of stars, with a total mass, initial mass distribution, and initial metallicity distribution.
The initial mass distributions are given as one of the standard distributions, Salpeter, Kroupa, Chabrier, or a power-law, all between some minimum and maximum mass limit (see figure \ref{fig:imf}.
The initial metallicity distribution is the relative mass distribution of isotopes heavier than \isotope{Li}{3}{7}, and the metallicity is the mass fraction of all isotopes heavier than \isotope{Li}{3}{7} combined.
\input{img/Plot_of_various_initial_mass_functions}

Stellar evolution codes calculate the amount of ejected material, for each isotope, for a star with a given initial metallicity and initial mass. These codes are used to create \textbf{yield tables} for certain kind of stars with different initial mass and metallicity.

In the simple stellar population assumed in the galactic chemical evolution model, these yield tables are used to calculate the chemical composition and mass of ejecta from each group of stars. The ejecta are disspersed back into the interstellar medium (gas of the galaxy model) at delay-times appropriate for each group of stellar mass.
E.g. For a given mass-bin the total mass in stars, number, and age of stars, with initial mass in that bin, are calculated using the total mass of the total stellar mass and mass function chosen. By choosing the yield tables closest in initial mass and initial metallicity the total ejecta composition is calculated and added to the interstellar medium at the age where those stars would have gone supernova.
The material that is not ejected is left as remnants and total mass and number of remnants are also added to the simulation at the time these stars would have gone supernova.

In \omegamodel\ the creation and treatment of simple stellar population is done by another python-program called \texttt{Sygma}.

The \omegamodel\ model is a \textit{one-zone} model, meaning that everything inside the box has been enriched from stellar lifecycles. Everything outside the box is untouched since ``it's creation'', and has the same composition as the material inside the box had to start with.
This composition is called the primordial composition (three parts hydrogen, one part helium and trace amounts of lithium and beryllium), and is derived from the big bang nucleosynthesis (see section\ref{sec:bbn}.
Flow of material can determine the chemical evolution of a galaxy. Enriched material can be ejected from the galaxy by supernova feedback, active galactic nucleus, stellar kick or similar, and non-enriched material can flow into the galaxy.
To describe the chemical evolution of a one-zone model one needs to know the total content of the galaxy (or box) and the distribution. In other words, how much of the total mass is stored as each isotope. Material with the same composition as the box is ejected from the box, and material with another composition falls into the box.

\comment{More on outflow/inflow}

\subsection{Uncertainty of parameters}
\comment{uncertainty of parameters and summary of article (cote16a)}

Galaxies consist of many different, widely varying, scales for both spatial and temporal resolution.
Galaxies span hydrodynamical evolution on many kpcs and Gyrs, while their stars and supernovae span scales closer to seconds and meters.
The nuclear processes within stars span nanometer and millisecond timescales, even though stars can last for billion years(with short timescale bursts in between).
Simulations cannot cover all these scales at once, that is when subgrid methods are used. Stellar evolution simulations predict the fate and output from a stellar life based on input parameters. These solutions are then simplified and applied to more complex galaxy simulations.
Output from stars are ``looked up in a table'' and applied to the nearby interstellar medium.
All these methods and linked applications create some uncertainties, both physical and numerical, and these uncertainties are inherited through all methods based on applications of these models. In order to probe how these uncertainties manifest through the resulting galaxy evolution, this article presents a simple one-zone, closed-box model of galaxy evolution, called \omegamodel.

SYGMA creates the simplified stellar populations(mass function, total mass, lifetime distribution, initial metallicity).
OMEGA combines several stellar populations to emulate a galaxy evolution.

Stellar yields are tables from stellar evolution simulations.
The tables used in OMEGA are taken from NuGrid and include AGB stars between 1 and 7 msol, massive stars between 12 and 25 msol, all with metallicities at 0.02, 0.01, 0.006, 0.001, 0.0001. These tables contain many isotopes between hydrogen and bismuth.

The stellar evolution was calculated with MESA, post-processing was done with MPPNP, the same nuclear reaction rates were used in all calculations, explosive nucleosynthesis was done with semi-analytical models. Yields are complemeted with SN1a yields from Thielemann and population III yields from Heger\&Woosley.

The probability distribution functions are created from values and uncertainties in the literature.
Methodologically there are, for each input parameter, gathered a list of literature values and uncertainties.
The errors are considered gaussian in nature and distributions are created thereafter,
all the distributions are then averaged to a single distribution.
Then a single gaussian is fitted atop the ``average of gaussians from the literature'',
and the median and standard deviation from
the final fit is used as value and uncertainty for the input parameter in question.

The parameter space was sampled by running 300 simulations where each parameter was varied within their gaussian probability distribution.
Then a set of 700 simulations where run with all parameters sampled randomly from their gaussian probability distribution.
A final set of 300 simulations where also run with varying final stellar and gas mass.

The mass limits of the IMF generate little uncertainty.

Modifying final stellar-gas ratio, the uncertainty is manifested in low [Fe/H] values, because more stars produce more iron and and more gas means more hydrogen. However the relative ratio of ejecta is unchanged, meaning [X/Fe] are not affected.
In the grand scheme, uncertainties from final stellar mass and gas mass are not significant.

Uncertainty in number of type 1a supernovae does not manifest as uncertainty in abundance until after delay time of those supernovae.
The abundance has no uncertainty until [Fe/H] ~ -1.5 associated with 150 Myr.
The unusual low iron abundance (milky way is believed to have type 1a supernovae onset at [Fe/H]~1) is due to the closed-box
approximation.
Type 1a supernovae add mostly iron to the interstellar abundance, increasing [Fe/H], decreasing [X/Fe].
CNO-elements that are not produced much in SN1a are most affected.

Slope of the IMF has the most effect, increasing it allows for more massive stars with quick and much ejecta.
These stars quickly enrich the surounding gas.

Overall uncertainty is calculated by varying all parameters simultaneously.
Since the previous analysis depended on the uncertainty of a single variable, while keeping the other parameters constant,
this becomes only an estimate of the uncertainty. However it will grant some valueble insight into which parameter affects
the uncertainty the most.

Parameters with the most impact: Slope of the IMF, total number of type 1a supernovae and final gas mass of galaxy.

Varying seven input parameters stochastichally and in a monte carlo type fashion.
The main conclusions are:
\begin{enumerate}
\item{Overall uncertainties between 0 and 0.6 dex. Metaliccity dependant uncertainties.}
\item{Mass of gas and stars affect the uncertainties below [Fe/H] ~ -2,
  with the delay-time distribution and number of type 1a supernovae affect the uncertainties above [Fe/H] ~ -1.5,
  slope of the IMF affects uncertainty at all metallicities.}
\item{Slope of IMF and number of type 1a supernovae affect uncertainty the most when plotting against metallicity.
  Uncertainty is greatest when cosidered element and reference element is not the same. }
\item{Features in [X/Fe]-[Fe/H] and [X/Mg]-[Mg/H] share the same characteristics. Such variations
  are mostly caused by stellar yields, type of galaxy and star formation history.}
\end{enumerate}


\subsection{Relevant parameters}
\label{sec:omega-parameters}
\omegamodel\ has many input parameters, both numerical and physical in nature\footnote{A physical input parameters are model parameters, while a numerical parameter decides on which calculations to choose from and where to get data. E.g initial gas of galaxy is considered physical, while the boolean switch to turn on neutron star mergers are considered numerical.}, to guide the evolution of the galaxy.

This section will describe the most relevant ones.

\begin{description}
\item[galaxy]
  This string option chooses predefined parameters to best match a certain galaxy on record.
  The relevant options are:
  \begin{description}
  \item[None] No parameters determined.
  \item[milky\_way\_cte] Set present dark matter mass to $10^{12} \msol$ and present stellar mass to $5\times10^{10} \msol$, and use a constant star formation rate of $1 \frac{\msol}{yr}$
  \item[milky\_way] Set present dark matter mass to $10^{12} \msol$ and present stellar mass to $5\times10^{10} \msol$, and use the star formation rate from Chiappini et al. (2001) \comment{add proper reference}
  \end{description}
\item[dt] Length of first timestep (in yrs)
\item[special\_timesteps] Number of logarithmic timesteps
\item[tend] Final point in time (in yrs)
\item[mgal] Initial mass of gas (if not calculated by other means), defaults to $10^{10} \msol$
\item[imf\_type] Which form to use for the initial mass function\comment{explain this somewhere}. 
\item[sfh\_array] Two one-dimensional arrays, time and star formation rate, that \omegamodel will interpolate over in order to find the star formation rate at a given time.
\item[in\_out\_control] Boolean switch to turn on or off inflow and outflow.
\item[inflow\_rate] Constant inflow rate in $\frac{\msol}{yr}$. Gas with primordial composition \comment{(reference to BBN?)} flows into the galaxy.
\item[outflow\_rate] \comment{remove this?} Constant outflow rate in $\frac{\msol}{yr}$. Enriched gas from the interstellar medium is removed from the galaxy.
\item[mass\_loading] Fraction of solar masses ejected per solar mass created as star. A different way of calculating outflow based on star formation rate.
\item[out\_follows\_E\_rate] Adds a time-delay to outflow with mass\_loading such that outflow follows supernova rate.
\item[transitionmass=8]
  Mass-limit that separates the AGB stars from the massive stars\comment{explain these stars somewhere}.
  Defaults to $8\msol$
\item[popIII\_on] Boolean switch that turn on or off the use of Population III stars
\item[pop3\_table] Yield tables for population III stars
\item[imf\_bdys\_pop3] The boundaries of the initial mass function of population III stars.
\item[sn1a\_on] Boolean switch that turn on or off the use of type 1a supernovae.
\item[nb\_1a\_per\_m] The number of type 1a supernovae per solar mass formed.
  Used to calculate the number of type 1a supernovae from star formation rate.
\item[sn1a\_table] Yield table for type 1a supernovae
\item[sn1a\_rate] This string option chooses which distribution to calculate the rate of type 1a supernovaefrom.
  Options are powerlaw, gaussian, and exponential distribution.
  \begin{description}
  \item[beta\_pow] Set the power of the power law distribution if 'sn1a\_rate' is "power\_law" 
  \item[gauss\_dtd] Set the mean and standard deviation of the gaussian distribution if 'sn1a\_rate' is "gauss" 
  \item[exp\_dtd] Set the e-folding time of the exponential distribution if 'sn1a\_rate' is "exp"
  \end{description}
\item[ns\_merger\_on] Boolean switch to turn on or off binary neutron star mergers
\item[bhns\_merger\_on] Boolean switch to turn on or off black hole neutron star mergers
\item[nsmerger\_table] Yield table of binary neutron star mergers
\item[nb\_nsm\_per\_m] Set the number of neutron star mergers per solar mass formed as stars.
\item[t\_nsm\_coal] Set the time after which all neutron stars collide/merge
\item[nsm\_dtd\_power] Set the powerlaw distribution of the neutron star merger delay-time distribution \comment{explain this somewhere}.
\item[f\_merger] Fraction of binary systems that eventually merge. All systems are considered binary. This is instead of 'nb\_nsm\_per\_m'
\item[m\_ej\_nsm] solar masses ejected per neutron star merger.
\end{description}
